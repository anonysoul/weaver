server:
  port: ${WEAVER_PORT:8080}

spring:
  datasource:
    url: ${WEAVER_DB_URL:jdbc:sqlite:./weaver.db}
    driver-class-name: org.sqlite.JDBC
  jpa:
    hibernate:
      ddl-auto: update
    open-in-view: false
    properties:
      hibernate:
        dialect: org.hibernate.community.dialect.SQLiteDialect

weaver:
  crypto:
    key: ${WEAVER_CRYPTO_KEY:MDEyMzQ1Njc4OWFiY2RlZjAxMjM0NTY3ODlhYmNkZWY=}
  cors:
    origins: ${WEAVER_CORS_ORIGINS:http://localhost:4200}
  workspace:
    base-path: ${WEAVER_WORKSPACE_BASE_PATH:/root/workspace}
  session-logs:
    base-path: ${WEAVER_SESSION_LOGS_BASE_PATH:./session-logs}
  container:
    image: ${WEAVER_CONTAINER_IMAGE:weaver-codex}
    name-prefix: ${WEAVER_CONTAINER_NAME_PREFIX:weaver-session}
    data-volume: ${WEAVER_CONTAINER_DATA_VOLUME:weaver-data}
    data-mount-path: ${WEAVER_CONTAINER_DATA_MOUNT_PATH:/data}
  session:
    init:
      core-pool-size: ${WEAVER_SESSION_INIT_CORE_POOL_SIZE:2}
      max-pool-size: ${WEAVER_SESSION_INIT_MAX_POOL_SIZE:4}
      queue-capacity: ${WEAVER_SESSION_INIT_QUEUE_CAPACITY:50}
      thread-name-prefix: ${WEAVER_SESSION_INIT_THREAD_NAME_PREFIX:session-init-}
    rate-limit:
      enabled: ${WEAVER_SESSION_RATE_LIMIT_ENABLED:true}
      max-requests: ${WEAVER_SESSION_RATE_LIMIT_MAX_REQUESTS:30}
      window-seconds: ${WEAVER_SESSION_RATE_LIMIT_WINDOW_SECONDS:60}
    cleanup:
      enabled: ${WEAVER_SESSION_CLEANUP_ENABLED:true}
      fixed-delay-millis: ${WEAVER_SESSION_CLEANUP_FIXED_DELAY_MILLIS:600000}
      log-retention-days: ${WEAVER_SESSION_LOG_RETENTION_DAYS:7}
